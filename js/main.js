class mime{
    constructor(x, y) {
        this.x = x;
        this.y = y;
    }
}
var hunts=[]
//a hunt consists of 30 elements. 4 are mimics. 
let hunt=[
	new mime(0,4),new mime(0,8),new mime(1,5),new mime(2,9)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,8),new mime(0,9),new mime(1,0),new mime(1,5)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,0),new mime(0,1),new mime(0,8),new mime(1,7)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,2),new mime(0,6),new mime(1,1),new mime(2,5)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,1),new mime(0,3),new mime(0,5),new mime(1,1)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,0),new mime(0,2),new mime(0,4),new mime(2,3)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,5),new mime(1,3),new mime(2,1),new mime(2,7)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,3),new mime(1,3),new mime(2,5),new mime(2,7)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,9),new mime(1,1),new mime(1,8),new mime(2,1)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,3),new mime(1,7),new mime(2,0),new mime(2,7)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,2),new mime(2,0),new mime(2,4),new mime(2,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,3),new mime(0,5),new mime(0,8),new mime(1,5)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,2),new mime(2,3),new mime(2,6),new mime(2,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,1),new mime(1,8),new mime(1,9),new mime(2,4)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,8),new mime(1,0),new mime(1,8),new mime(2,0)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,6),new mime(0,8),new mime(2,0),new mime(2,1)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,1),new mime(1,2),new mime(1,7),new mime(2,0)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,9),new mime(1,0),new mime(1,2),new mime(1,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,5),new mime(1,2),new mime(1,9),new mime(2,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,9),new mime(2,1),new mime(2,3),new mime(2,5)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,9),new mime(1,2),new mime(2,1),new mime(2,5)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,0),new mime(0,2),new mime(2,8),new mime(2,9)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,3),new mime(1,1),new mime(1,3),new mime(1,9)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,0),new mime(1,1),new mime(1,3),new mime(2,7)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,3),new mime(0,8),new mime(1,4),new mime(2,3)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,6),new mime(1,3),new mime(2,7),new mime(2,9)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,2),new mime(0,9),new mime(1,9),new mime(2,7)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,4),new mime(0,5),new mime(0,6),new mime(0,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,2),new mime(1,8),new mime(2,1),new mime(2,5)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,7),new mime(0,8),new mime(1,3),new mime(2,9)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,2),new mime(0,5),new mime(1,3),new mime(2,3)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,1),new mime(0,9),new mime(1,2),new mime(2,4)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,2),new mime(0,4),new mime(0,6),new mime(1,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,1),new mime(0,2),new mime(0,3),new mime(2,1)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,1),new mime(1,6),new mime(1,9),new mime(2,7)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,0),new mime(0,2),new mime(1,2),new mime(2,2)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,0),new mime(1,4),new mime(1,7),new mime(1,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,0),new mime(0,1),new mime(2,1),new mime(2,9)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,1),new mime(1,4),new mime(1,8),new mime(2,2)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,6),new mime(1,1),new mime(1,8),new mime(2,5)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,0),new mime(0,5),new mime(1,2),new mime(2,3)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,8),new mime(1,8),new mime(2,0),new mime(2,5)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,0),new mime(1,4),new mime(2,0),new mime(2,4)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,8),new mime(1,1),new mime(1,3),new mime(2,2)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,0),new mime(0,5),new mime(1,3),new mime(0,4)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,1),new mime(0,3),new mime(1,0),new mime(1,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,1),new mime(0,4),new mime(1,4),new mime(2,7)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,6),new mime(1,8),new mime(2,1),new mime(2,7)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,1),new mime(1,3),new mime(2,3),new mime(2,9)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,1),new mime(1,2),new mime(1,5),new mime(2,1)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,3),new mime(1,1),new mime(2,6),new mime(2,9)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,0),new mime(0,7),new mime(1,4),new mime(1,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,1),new mime(1,2),new mime(1,8),new mime(2,0)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,3),new mime(0,6),new mime(2,0),new mime(2,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,0),new mime(1,6),new mime(2,0),new mime(2,60)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,4),new mime(1,3),new mime(1,9),new mime(2,4)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,0),new mime(1,3),new mime(2,0),new mime(2,4)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,8),new mime(1,7),new mime(2,4),new mime(2,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,5),new mime(1,3),new mime(1,4),new mime(2,9)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,6),new mime(1,8),new mime(2,1),new mime(2,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,3),new mime(0,9),new mime(1,9),new mime(2,7)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,2),new mime(2,5),new mime(2,7),new mime(2,9)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,5),new mime(0,8),new mime(1,4),new mime(2,6)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,1),new mime(0,5),new mime(2,3),new mime(2,4)
]
hunts.push(hunt)
//
hunt=[
	new mime(1,0),new mime(1,2),new mime(1,7),new mime(2,8)
]
hunts.push(hunt)
//
hunt=[
	new mime(0,3),new mime(1,4),new mime(1,5),new mime(2,8)
]
hunts.push(hunt)

//alert('there are '+hunts.length+' hunts. wow.')
/*
//
hunt=[
	new mime(),new mime(),new mime(),new mime()
]
hunts.push(hunt)
*/

function cleanup_hunts(){
	let recurse=false;
	let hl=hunts.length;
	for(let j=0;j<hl;j++){
		if(hunts[j]==null){
			hunts.splice(j,1)
			recurse=true;
		}
	}
	if(recurse){
		cleanup_hunts()
	}
}
function check_if_mime(hunt,row,col){
	let is_mime=false
	for(let mime of hunt){
		if(mime.x==row&&mime.y==col){
			is_mime=true
		}
	}
	return is_mime
}
function handle_hunts(ds,is_chest){
	for(let i=0;i<hunts.length;i++){
		let curr_hunt=hunts[i]
		if(check_if_mime(curr_hunt,ds.x,ds.y)){
			if(is_chest){
				//if checked box is a mime, but should be chest (left click handling)
				delete hunts[i]
				continue
			}
		}else{
			if(!is_chest){
				delete hunts[i]
				continue
			}
		}
	}
	cleanup_hunts()
	if(hunts.length<1){
		alert('no more hunts. pleas add data')
	}
}
function print_hunts(){
	let huntsdiv=document.getElementById('hunts')
	huntsdiv.innerHTML=''
	for(let hunt of hunts){
		if(hunt.length>1){
			let huntdiv=document.createElement('div')
			huntdiv.classList.add('hunt')
			for(let row=0;row<3;row++){
				for(let col=0;col<10;col++){
					let chestdiv=document.createElement('div')
					if(check_if_mime(hunt,row,col)){
						chestdiv.classList.add('bad')
					}else{
						chestdiv.classList.add('good')
					}
					huntdiv.appendChild(chestdiv)
				}
			}
			huntsdiv.appendChild(huntdiv)
		}
	}
}

function handleLeftClick(elem){
	elem.classList.remove('unknown')
	elem.classList.add('good')
	let ds=elem.dataset
	handle_hunts(ds,true)
	print_hunts()
}
function handleRightClick(e,elem){
	e.preventDefault();
	elem.classList.remove('unknown')
	elem.classList.add('bad')
	let ds=elem.dataset
	handle_hunts(ds,false)
	print_hunts()
}
window.onload=function(e){
	let reloaddiv=document.getElementById('reload')
	reloaddiv.onclick=function(){window.location.reload(true)}
	let resdiv=document.getElementById('result')
	for(i=0;i<3;i++){
		for(j=0;j<10;j++){
			let item= document.createElement('div');
			item.classList.add("unknown");
			item.dataset.x=i
			item.dataset.y=j
			item.onclick=function(){handleLeftClick(item)}
			item.oncontextmenu=function(e){handleRightClick(e,item)}
			resdiv.appendChild(item)
		}
		let br=document.createElement('div')
		br.classList.add("stopper");
		resdiv.appendChild(br)
	}
	print_hunts();
}